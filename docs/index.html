<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time-Based Rolling Functions • tbrf</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Time-Based Rolling Functions">
<meta property="og:description" content="Provides rolling statistical functions based
    on date and time windows instead of n-lagged observations.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tbrf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/intro_to_tbrf.html">tbrf Introduction</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tbrf" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tbrf" class="anchor"></a>tbrf</h1></div>

<p><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a></p>
<p>The goal of tbrf is to provide time-window based rolling statistical functions. The package differs from other rolling statistic packages because the intended use is for irregular measured data. Althogh tbrf can be used to apply statistical functions to regularly sampled data, <a href="https://CRAN.R-project.org/package=zoo"><code>zoo</code></a>, <a href="https://cran.r-project.org/package=RcppRoll"><code>RcppRoll</code></a>, and other packages provide fast, efficient, and rich implementations of rolling/windowed functions.</p>
<p>An appropriate example case is water quality data that is measured at irregular time intervals. Regulatory compliance is often based on a statistical average measure or exceedance probability applied to all samples collected in the previous 7-years. tbrf can be used to display regulatory status at any sample point.</p>
<p>tbrf identifies the previous n measurements within the specified time window, applies the function, and outputs a varaible with the result of the rolling statistical measure.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>tbrf is available on CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"tbrf"</span>)</code></pre></div>
<p>The development version is maintained on github and can be installed as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">install.github</span>(<span class="st">"mps9506/tbrf"</span>)</code></pre></div>
</div>
<div id="available-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#available-functions" class="anchor"></a>Available Functions</h2>
<ul>
<li><p><code>tbr_binom</code>: Rolling binomal probability with confidence intervals.</p></li>
<li><p><code>tbr_gmean</code>: Rolling geometric mean with confidence intervals.</p></li>
<li><p><code>tbr_mean</code>: Rolling mean with confidence intervals.</p></li>
<li><p><code>tbr_median</code>: Rolling median with confidence intervals.</p></li>
<li><p><code>tbr_misc</code>: Accepts user specified function.</p></li>
<li><p><code>tbr_sd</code>: Rolling standard deviation.</p></li>
<li><p><code>tbr_sum</code>: Rolling sum.</p></li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>See:</p>
<p><a href="https://mps9506.github.io/tbrf/" class="uri">https://mps9506.github.io/tbrf/</a></p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Plot a rolling 6-hour geometric mean</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tbrf)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggalt)

y &lt;-<span class="st"> </span><span class="op">-</span><span class="dv">100</span><span class="op">*</span><span class="kw"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">50</span>))
time =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span>(<span class="st">"2017-01-01 00:01:00"</span>, <span class="st">"%Y-%m-%d %H:%M:%S"</span>)),
                  <span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span>(<span class="st">"2017-01-03 23:00:00"</span>, <span class="st">"%Y-%m-%d %H:%M:%S"</span>)),
                  <span class="dt">by =</span> <span class="st">"min"</span>), <span class="dv">50</span>)

df &lt;-<span class="st"> </span><span class="kw">tibble</span>(time, y)

df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/tbr_gmean.html">tbr_gmean</a></span>(y, time, <span class="dt">unit =</span> <span class="st">"hours"</span>, <span class="dt">n =</span> <span class="dv">6</span>, <span class="dt">conf =</span> <span class="fl">0.95</span>, <span class="dt">type =</span> <span class="st">"perc"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(time, y)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_step</span>(<span class="kw">aes</span>(time, mean)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(time, <span class="dt">ymin =</span> lwr_ci, <span class="dt">ymax =</span> upr_ci), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">stat =</span> <span class="st">"stepribbon"</span>)</code></pre></div>
<p><img src="reference/figures/README-tbr_misc-1.png" width="672"></p>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>tbrf code is released under GPL-3 | LICENSE.md</p>
<p><code><a href="reference/binom_ci.html">binom_ci()</a></code> is an implementation of code licensed under GPL (&gt;=2) by Frank Harrell’s <a href="https://github.com/harrelfe/Hmisc"><code>Hmisc</code></a> package.</p>
</div>
<div id="test-results" class="section level2">
<h2 class="hasAnchor">
<a href="#test-results" class="anchor"></a>Test Results</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tbrf)

<span class="kw"><a href="https://rdrr.io/r/base/date.html">date</a></span>()
## [1] "Fri Oct 04 16:01:10 2019"

devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/test.html">test</a></span>()
## v |  OK F W S | Context
## 
<span class="op">/</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>       <span class="op">|</span><span class="st"> </span>core functions work <span class="cf">in</span> piped workflow
<span class="op">-</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">1</span>       <span class="op">|</span><span class="st"> </span>core functions work <span class="cf">in</span> piped workflow
<span class="op">|</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">3</span>       <span class="op">|</span><span class="st"> </span>core functions work <span class="cf">in</span> piped workflow
<span class="op">-</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">5</span>       <span class="op">|</span><span class="st"> </span>core functions work <span class="cf">in</span> piped workflow
\ <span class="op">|</span><span class="st">   </span><span class="dv">6</span>       <span class="op">|</span><span class="st"> </span>core functions work <span class="cf">in</span> piped workflow
v <span class="op">|</span><span class="st">   </span><span class="dv">6</span>       <span class="op">|</span><span class="st"> </span>core functions work <span class="cf">in</span> piped workflow [<span class="fl">0.6</span> s]
## 
<span class="op">/</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>       <span class="op">|</span><span class="st"> </span>core functions return expected errors and messages
v <span class="op">|</span><span class="st">   </span><span class="dv">7</span>       <span class="op">|</span><span class="st"> </span>core functions return expected errors and messages
## 
<span class="op">/</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>       <span class="op">|</span><span class="st"> </span>core functions return expected structures and values
\ <span class="op">|</span><span class="st">   </span><span class="dv">2</span>       <span class="op">|</span><span class="st"> </span>core functions return expected structures and values
<span class="op">-</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">5</span>       <span class="op">|</span><span class="st"> </span>core functions return expected structures and values
<span class="op">|</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">7</span>       <span class="op">|</span><span class="st"> </span>core functions return expected structures and values
<span class="op">/</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">8</span>       <span class="op">|</span><span class="st"> </span>core functions return expected structures and values
v <span class="op">|</span><span class="st">   </span><span class="dv">8</span>       <span class="op">|</span><span class="st"> </span>core functions return expected structures and values [<span class="fl">1.4</span> s]
## 
<span class="op">/</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>       <span class="op">|</span><span class="st"> </span>internal statistical functions return expected values
<span class="op">-</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">1</span>       <span class="op">|</span><span class="st"> </span>internal statistical functions return expected values
\ <span class="op">|</span><span class="st">   </span><span class="dv">2</span>       <span class="op">|</span><span class="st"> </span>internal statistical functions return expected values
<span class="op">|</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">3</span>       <span class="op">|</span><span class="st"> </span>internal statistical functions return expected values
<span class="op">-</span><span class="st"> </span><span class="er">|</span><span class="st">   </span><span class="dv">5</span>       <span class="op">|</span><span class="st"> </span>internal statistical functions return expected values
v <span class="op">|</span><span class="st">  </span><span class="dv">11</span>       <span class="op">|</span><span class="st"> </span>internal statistical functions return expected values [<span class="fl">1.1</span> s]
## 
## == Results ===================================================================================
## Duration: 3.2 s
## 
## OK:       32
## Failed:   0
## Warnings: 0
## Skipped:  0</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=tbrf">https://​cloud.r-project.org/​package=tbrf</a>
</li>
<li>Report a bug at <br><a href="https://github.com/mps9506/tbrf/issues">https://​github.com/​mps9506/​tbrf/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael Schramm <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1876-6592" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=tbrf"><img src="https://www.r-pkg.org/badges/version/tbrf" alt="CRAN version"></a></li>
<li><a href="https://travis-ci.org/mps9506/tbrf"><img src="https://travis-ci.org/mps9506/tbrf.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/mps9506/tbrf"><img src="https://ci.appveyor.com/api/projects/status/github/mps9506/tbrf?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/mps9506/tbrf?branch=master"><img src="https://codecov.io/gh/mps9506/tbrf/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Michael Schramm.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
