<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Time-Based Rolling Functions • tbrf</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="deps/Noto_Sans_Display-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Time-Based Rolling Functions">
<meta name="description" content="Provides rolling statistical functions based on date and time windows instead of n-lagged observations.">
<meta property="og:description" content="Provides rolling statistical functions based on date and time windows instead of n-lagged observations.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">tbrf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/intro_to_tbrf.html">tbrf Introduction</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mps9506/tbrf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="tbrf">tbrf<a class="anchor" aria-label="anchor" href="#tbrf"></a>
</h1></div>
<!-- badges: start -->


<!-- badges: end -->
<p>tbrf is retired. I will maintain the package to ensure it remains on CRAN but do not expect additional functionality or improvements. I highly recommend <a href="https://gogonzo.github.io/runner/" class="external-link">runner</a> for the same functionality but faster!</p>
<p>The goal of tbrf is to provide time-window based rolling statistical functions. The package differs from other rolling statistic packages because the intended use is for irregular measured data. Although tbrf can be used to apply statistical functions to regularly sampled data, <a href="https://CRAN.R-project.org/package=zoo" class="external-link"><code>zoo</code></a>, <a href="https://cran.r-project.org/package=RcppRoll" class="external-link"><code>RcppRoll</code></a>, and other packages provide fast, efficient, and rich implementations of rolling/windowed functions.</p>
<p>An appropriate example case is water quality data that is measured at irregular time intervals. Regulatory compliance is often based on a statistical average measure or exceedance probability applied to all samples collected in the previous 7-years. tbrf can be used to display regulatory status at any sample point.</p>
<p>tbrf identifies the previous n measurements within the specified time window, applies the function, and outputs a variable with the result of the rolling statistical measure.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>tbrf is available on CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tbrf"</span>)</span></code></pre></div>
<p>The development version is available on r-universe and can be installed as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'tbrf'</span>, <span class="at">repos =</span> <span class="fu">c</span>(<span class="st">'https://mps9506.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span>))</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="available-functions">Available Functions<a class="anchor" aria-label="anchor" href="#available-functions"></a>
</h2>
<ul>
<li><p><code>tbr_binom</code>: Rolling binomial probability with confidence intervals.</p></li>
<li><p><code>tbr_gmean</code>: Rolling geometric mean with confidence intervals.</p></li>
<li><p><code>tbr_mean</code>: Rolling mean with confidence intervals.</p></li>
<li><p><code>tbr_median</code>: Rolling median with confidence intervals.</p></li>
<li><p><code>tbr_misc</code>: Accepts user specified function.</p></li>
<li><p><code>tbr_sd</code>: Rolling standard deviation.</p></li>
<li><p><code>tbr_sum</code>: Rolling sum.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>See:</p>
<p><a href="https://mps9506.github.io/tbrf/" class="external-link uri">https://mps9506.github.io/tbrf/</a></p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Plot a rolling 1-hour mean:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(tbrf)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>y <span class="ot">=</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">4</span><span class="sc">*</span>pi, <span class="at">length.out =</span> <span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>time <span class="ot">=</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="fu">as.POSIXct</span>(<span class="fu">strptime</span>(<span class="st">"2017-01-01 00:01:00"</span>, <span class="st">"%Y-%m-%d %H:%M:%S"</span>)),</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>                  <span class="fu">as.POSIXct</span>(<span class="fu">strptime</span>(<span class="st">"2017-01-01 23:00:00"</span>, <span class="st">"%Y-%m-%d %H:%M:%S"</span>)),</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>                  <span class="at">by =</span> <span class="st">"min"</span>), <span class="dv">100</span>)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(y, time)</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>  <span class="fu">tbr_mean</span>(y, time, <span class="st">"hours"</span>, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(time, y)) <span class="sc">+</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="fu">aes</span>(time, mean))</span></code></pre></div>
<p><img src="reference/figures/README-tbr_hour-1.png" width="672"></p>
<p>Plot a rolling 3-hour mean:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">tbr_mean</span>(y, time, <span class="st">"hours"</span>, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(time, y)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="fu">aes</span>(time, mean))</span></code></pre></div>
<p><img src="reference/figures/README-tbr_threehour-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Please note that this project is released with a <a href="https://github.com/mps9506/tbrf/blob/master/CODE_OF_CONDUCT.md" class="external-link">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>tbrf code is released under GPL-3 | LICENSE.md</p>
<p><code><a href="reference/binom_ci.html">binom_ci()</a></code> is an implementation of code licensed under GPL (&gt;=2) by Frank Harrell’s <a href="https://github.com/harrelfe/Hmisc" class="external-link"><code>Hmisc</code></a> package.</p>
<p><code><a href="reference/stat_stepribbon.html">stat_stepribbon()</a></code> is an implementation of code licensed under MIT by Bob Rudis’s <a href="https://github.com/hrbrmstr/ggalt" class="external-link"><code>ggalt</code></a> package.</p>
<p>If you can cite the use of this software, please use <code>citation("tbrf")</code> <a href="https://doi.org/10.5281/zenodo.3727319" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3727319.svg" alt="DOI"></a>.</p>
</div>
<div class="section level2">
<h2 id="test-results">Test Results<a class="anchor" aria-label="anchor" href="#test-results"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(tbrf)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">date</span>()</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">## [1] "Wed Aug 13 20:28:33 2025"</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">test</span>()</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="do">## ✔ | F W  S  OK | Context</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="do">## ⠏ |          0 | expectedClass                                                  </span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="do">## ⠏ |          0 | core functions work in piped workflow                          </span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="do">## ⠸ |          4 | core functions work in piped workflow                          </span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="do">## ✔ |          6 | core functions work in piped workflow</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="do">## ⠏ |          0 | expectedMessages                                               </span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="do">## ⠏ |          0 | core functions return expected errors and messages             </span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="do">## ⠹ |          3 | core functions return expected errors and messages             </span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="do">## ⠦ |          7 | core functions return expected errors and messages             </span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="do">## ✔ |          7 | core functions return expected errors and messages</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="do">## ⠏ |          0 | expectedValues                                                 </span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="do">## ⠏ |          0 | core functions return expected structures and values           </span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="do">## ⠸ |          4 | core functions return expected structures and values           </span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="do">## ⠼ |          5 | core functions return expected structures and values           </span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="do">## ⠴ |          6 | core functions return expected structures and values           </span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="do">## ✔ |          6 | core functions return expected structures and values</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="do">## ⠏ |          0 | internalStatsFunctions                                         </span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a><span class="do">## ⠏ |          0 | internal statistical functions return expected values          </span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a><span class="do">## ⠼ |          5 | internal statistical functions return expected values          </span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a><span class="do">## ✔ |         17 | internal statistical functions return expected values</span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="do">## ══ Results ═════════════════════════════════════════════════════════════════════</span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="do">## Duration: 1.1 s</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a><span class="do">## [ FAIL 0 | WARN 0 | SKIP 0 | PASS 36 ]</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=tbrf" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mps9506/tbrf/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mps9506/tbrf/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing tbrf</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/mps9506" class="external-link">Michael Schramm</a> <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-1876-6592" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#retired" class="external-link"><img src="https://img.shields.io/badge/lifecycle-retired-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://CRAN.R-project.org/package=tbrf" class="external-link"><img src="https://www.r-pkg.org/badges/version/tbrf" alt="CRAN version"></a></li>
<li><a href="https://mps9506.r-universe.dev/tbrf" class="external-link"><img src="https://mps9506.r-universe.dev/tbrf/badges/version" alt="tbrf status badge"></a></li>
<li><a href="https://github.com/mps9506/tbrf/actions" class="external-link"><img src="https://github.com/mps9506/tbrf/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://app.codecov.io/github/mps9506/tbrf?branch=master" class="external-link"><img src="https://codecov.io/gh/mps9506/tbrf/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0" class="external-link"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/mps9506" class="external-link">Michael Schramm</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
